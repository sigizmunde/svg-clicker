!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequiree435;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequiree435=i),i.register("iE7OH",(function(t,n){var r,o;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),i.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),i.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),i.register("jdVyQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}})),i.register("e3GZ9",(function(e,t){e.exports=i("aNJCr").getBundleURL("3pNEa")+i("iE7OH").resolve("77Lv6")})),i.register("aNJCr",(function(t,n){var r;e(t.exports,"getBundleURL",(function(){return r}),(function(e){return r=e}));var o={};function i(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),o[e]=t),t}})),i.register("96NqA",(function(e,t){e.exports=i("aNJCr").getBundleURL("3pNEa")+i("iE7OH").resolve("6geOf")})),i.register("2FVbE",(function(e,t){e.exports=i("aNJCr").getBundleURL("3pNEa")+i("iE7OH").resolve("6XcTk")})),i.register("18nui",(function(e,t){e.exports=i("aNJCr").getBundleURL("3pNEa")+i("iE7OH").resolve("4zDIf")})),i.register("k3Fy9",(function(e,t){e.exports=i("aNJCr").getBundleURL("3pNEa")+i("iE7OH").resolve("cIYid")})),i.register("891Pd",(function(e,t){e.exports=i("aNJCr").getBundleURL("3pNEa")+i("iE7OH").resolve("52VT6")})),i("iE7OH").register(JSON.parse('{"3pNEa":"index.ae7f74b6.js","77Lv6":"ub11.4021132b.svg","6geOf":"ub5.cb5ad3c9.svg","6XcTk":"ub15.eb123731.svg","4zDIf":"ub7.54b535b0.svg","cIYid":"ub12.ef10ba01.svg","52VT6":"ub10.b3be43dd.svg"}'));var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var a={};function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t,n){t&&u(e.prototype,t);n&&u(e,n);return e};var c=function(){"use strict";function e(){t(l)(this,e),this.palletteArr=[]}return t(a)(e,[{key:"addPallettes",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;this.addOnePallette(l)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"addOnePallette",value:function(e){var t=e.palletteName,n=e.colorNumArr;return this.palletteArr.find((function(e){return e.palletteName===t}))?null:(this.palletteArr.push({palletteName:t,colorNumArr:n}),1)}},{key:"removePallette",value:function(e){return this.palletteArr.find((function(t){return t.palletteName=e}))?(this.palletteArr.splice(this.palletteArr.findIndex((function(t){return t.palletteName=e})),1),1):null}},{key:"generateNewPallette",value:function(){}},{key:"generatePalletteMarkup",value:function(e){var t=null;if("string"==typeof e?t=this.palletteArr.find((function(t){return t.palletteName===e})):"number"==typeof e&&e>-1&&(t=this.palletteArr[e]),t){var n=document.createElement("ul");n.classList.add("js-color-pallette");var r=!0,o=!1,i=void 0;try{for(var l,a=t.colorNumArr[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=l.value,c=document.createElement("li");c.classList.add("js-color-box"),c.style="background-color: #".concat(u.toString(16).padStart(6,"0"),"; --color-box-width: calc((100% / ").concat(t.colorNumArr.length,") - 8px); --color-box-height: calc((120px / ").concat(t.colorNumArr.length,") - 5px);"),n.append(c)}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}var s=document.createElement("p");return s.classList.add("pallette-name"),s.innerText=t.palletteName,[n,s]}var d=document.createElement("p");return d.innerText="No pallette found.",[d]}},{key:"generateListMarkup",value:function(){var e=document.createElement("ul");e.classList.add("js-pallette-list"),e.style="display: block; margin: 0; background-color: white; color: black; padding: 0; list-style: none;";var t=!0,n=!1,r=void 0;try{for(var o,i=this.palletteArr[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value,a=document.createElement("li");a.classList.add("js-pallette-name"),a.dataset.palletteName=l.palletteName,a.innerText=l.palletteName,e.append(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}}]),e}(),s={};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e,t){var n=d.default(e,t,"get");return f.default(e,n)};var d=v(i("1UHsN")),f=v(i("ffZzF"));function v(e){return e&&e.__esModule?e:{default:e}}var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t,n){p.default(e,t),t.set(e,n)};var m,p=(m=i("5k7tO"))&&m.__esModule?m:{default:m};var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(e,t,n){var r=y.default(e,t,"set");return b.default(e,r,n),n};var y=k(i("1UHsN")),b=k(i("jdVyQ"));function k(e){return e&&e.__esModule?e:{default:e}}var E={};Object.defineProperty(E,"__esModule",{value:!0}),E.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e};var S=new WeakMap,w=function(){"use strict";function e(n){t(l)(this,e),t(h)(this,S,{writable:!0,value:void 0}),t(g)(this,S,[]),this.length=n}return t(a)(e,[{key:"pushStack",value:function(e){try{t(s)(this,S).push(e)}catch(e){return console.error(e),0}return this.watchTheLimit(this.length),1}},{key:"popStack",value:function(){return t(s)(this,S).length>0?t(s)(this,S).pop():null}},{key:"watchTheLimit",value:function(e){t(s)(this,S).length>e&&(t(s)(this,S).shift(),this.watchTheLimit(e))}},{key:"clearStack",value:function(){t(g)(this,S,[])}},{key:"getLength",value:function(){return t(s)(this,S).length}}]),e}(),N=new WeakMap,_=function(){"use strict";function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this;if(t(l)(this,e),t(h)(this,N,{writable:!0,value:void 0}),t(E)(this,"histLimit",50),e._instance)return console.log("This singleton has an instance",e._instance),e._instance;e._instance=this,t(g)(this,N,"single"),this.currentColor="#ffffff",this.buttons={groupBtn:n,hoverBtn:r,undoBtn:o,revertBtn:i},this.backHistory=new w(this.histLimit),this.forwardHistory=new w(this.histLimit),this.buttons.groupBtn&&this.buttons.groupBtn.addEventListener("click",(function(){return a.gBtnClick()})),this.buttons.hoverBtn&&this.buttons.hoverBtn.addEventListener("click",(function(){return a.hBtnClick()})),this.buttons.undoBtn&&this.buttons.undoBtn.addEventListener("click",(function(){return a.undoChange()})),this.buttons.revertBtn&&this.buttons.revertBtn.addEventListener("click",(function(){return a.revertChange()}))}return t(a)(e,[{key:"mode",get:function(){return t(s)(this,N)},set:function(n){return(void 0===n?"undefined":t(L)(n))===Number&&n>=0&&n<e.MODES.length?(t(g)(this,N,e.MODES[n]),t(s)(this,N)):(t(g)(this,N,n),t(s)(this,N))}},{key:"leftClick",value:function(t){if(this.mode===e.MODES[0]||this.mode===e.MODES[2])return t.target.style.fill===this.currentColor?0:(this.backHistory.pushStack([{element:t.target,fill:t.target.style.fill}]),t.target.style.fill=this.currentColor,1);if(this.mode===e.MODES[1]){var n=this,r=[];t.currentTarget.childNodes.forEach((function(e){e.style.fill!==n.currentColor&&(r.push({element:e,fill:e.style.fill}),e.style.fill=n.currentColor)})),r.length&&this.backHistory.pushStack(r)}this.returnFocus()}},{key:"mouseOver",value:function(t){if(this.mode===e.MODES[0]&&(t.target.style.stroke="#ffffff"),this.mode===e.MODES[1]&&t.currentTarget.childNodes.forEach((function(e){e.style.stroke="#ffffff"})),this.mode===e.MODES[2]&&(t.target.style.stroke="#ffffff",1===t.buttons||3===t.buttons)){if(t.target.style.fill===this.currentColor)return 0;this.backHistory.pushStack([{element:t.target,fill:t.target.style.fill}]),t.target.style.fill=this.currentColor}}},{key:"mouseLeave",value:function(e){e.currentTarget.childNodes.forEach((function(e){e.style.stroke="none"})),this.returnFocus()}},{key:"gBtnClick",value:function(){this.buttons.groupBtn.classList.toggle("is-active"),this.buttons.groupBtn.classList.contains("is-active")?(this.buttons.hoverBtn.classList.remove("is-active"),this.mode=e.MODES[1]):this.mode=e.MODES[0]}},{key:"hBtnClick",value:function(){this.buttons.hoverBtn.classList.toggle("is-active"),this.buttons.hoverBtn.classList.contains("is-active")?(console.log("hover on"),this.buttons.groupBtn.classList.remove("is-active"),this.mode=e.MODES[2]):(console.log("single"),this.mode=e.MODES[0])}},{key:"undoChange",value:function(){console.log("undo");var e=this.backHistory.popStack(),t=this.exchangeStates(e);t&&this.forwardHistory.pushStack(t)}},{key:"revertChange",value:function(){console.log("revert");var e=this.forwardHistory.popStack(),t=this.exchangeStates(e);t&&this.backHistory.pushStack(t)}},{key:"exchangeStates",value:function(e){if(!e)return 0;try{var t=e.map((function(e){return{element:e.element,fill:e.element.style.fill}}));return e.forEach((function(e){e.element.style.fill=e.fill})),t}catch(e){return console.error(e),0}}},{key:"clearHistory",value:function(){this.forwardHistory.clearStack(),this.backHistory.clearStack()}},{key:"keyboardCommands",value:function(e){e.ctrlKey&&"KeyZ"===e.code&&!e.shiftKey&&this.undoChange(),e.ctrlKey&&e.shiftKey&&"KeyZ"===e.code&&this.revertChange()}},{key:"returnFocus",value:function(){window.focus()}}]),e}();t(E)(_,"MODES",["single","group","hover"]);var C=[{name:"Палай!",link:i("e3GZ9")},{name:"Палай! — pattern",link:i("96NqA")},{name:"Kyiv Santa",link:i("2FVbE")},{name:"russian ship",link:i("18nui")},{name:"Святокиця",link:i("k3Fy9")},{name:"Кохайтеся",link:i("891Pd")}],x={body:document.querySelector("body"),svgimage:document.getElementById("patternsvg"),imageContainer:document.querySelector(".image-container"),openMainMenuBtn:document.querySelector("#menu-open"),mainMenu:document.querySelector(".main-menu"),changePicBtn:document.querySelector("#change-pic-btn"),savePicBtn:document.querySelector("#save-pic-btn"),menuContainer:document.querySelector(".menu-container"),backdrop:document.querySelector(".backdrop"),groupBtn:document.querySelector(".js-group-tool-btn"),hoverBtn:document.querySelector(".js-hover-tool-btn"),undoBtn:document.querySelector(".js-undo-tool-btn"),revertBtn:document.querySelector(".js-revert-tool-btn"),colorPanel:document.querySelector(".color-menu"),minimizeBtn:document.querySelector(".js-minimize-btn"),colorListBtn:document.querySelector(".js-color-list-btn"),currentColor:document.querySelector(".js-current-color"),colorMenu:null},M=new _(x.groupBtn,x.hoverBtn,x.undoBtn,x.revertBtn);window.addEventListener("keydown",(function(e){return M.keyboardCommands(e)})),x.openMainMenuBtn.addEventListener("click",(function(){return x.mainMenu.classList.toggle("is-open")})),x.mainMenu.addEventListener("click",(function(){return x.mainMenu.classList.toggle("is-open")})),x.svgimage.setAttribute("data",C[0].link),H(x.svgimage),x.svgimage.addEventListener("load",(function(){H(x.svgimage),M.clearHistory()}));var O=new c;function B(e){M.currentColor=e,x.currentColor.style.backgroundColor=e}function H(e){console.log("adding SVG listeners...");var t=e.contentDocument;t.addEventListener("keydown",(function(e){return M.keyboardCommands(e)}));var n=t.querySelectorAll("g:not(#svg-back)"),r=!0,o=!1,i=void 0;try{for(var l,a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=l.value;u.addEventListener("click",(function(e){return M.leftClick(e)})),u.addEventListener("mouseover",(function(e){return M.mouseOver(e)})),u.addEventListener("mouseleave",(function(e){return M.mouseLeave(e)})),console.log("found <g> element")}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}console.log("...done")}function j(e){B(e.target.style.backgroundColor)}function A(){x.backdrop.classList.remove("is-hidden"),x.menuContainer.classList.remove("is-hidden")}function P(){x.backdrop.classList.add("is-hidden"),x.menuContainer.classList.add("is-hidden")}function T(e){x.colorMenu=O.generatePalletteMarkup(e),x.colorPanel.querySelector(".js-color-pallette").replaceWith(x.colorMenu[0]),x.colorPanel.querySelector(".pallette-name").replaceWith(x.colorMenu[1]);var t=!0,n=!1,r=void 0;try{for(var o,i=x.colorMenu[0].children[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.addEventListener("click",j)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}B(x.colorMenu[0].children[0].style.backgroundColor)}function q(e){x.svgimage.setAttribute("data",e),P()}O.addPallettes([{palletteName:"basic pallette",colorNumArr:[3447003,15844367,15158332,3066993,15528177,2899536]},{palletteName:"cold violet",colorNumArr:[5682884,9791456,7286934,397647,16229753]},{palletteName:"purple sunrise",colorNumArr:[16293723,15023985,10237319,6633344,4134481]},{palletteName:"vivid and bright",colorNumArr:[97023,16343808,16107776,7096319,15944049,13479290,3784904,16749442,11189085]},{palletteName:"colors of 1980s",colorNumArr:[16672936,3697096,5234143,16767576,13604347]},{palletteName:"perfect storm",colorNumArr:[12114136,8035999,5202791,15660507,16670549]},{palletteName:"shades of Ukraine",colorNumArr:[16773195,16765492,16756225,27351,2199551]}]),T(0),x.changePicBtn.addEventListener("click",(function(e){e.preventDefault(),function(e){var t=document.createElement("h2");t.classList.add("pallette-menu__header"),t.innerText="Choose a pisture:";var n=document.createElement("ul");n.classList.add("js-pallette-list"),n.style="display: block; margin: 0; background-color: white; color: black; padding: 0; list-style: none;",e.forEach((function(e){var t=document.createElement("li");t.classList.add("js-svg-name"),t.innerText=e.name,t.dataset.link=e.link,n.append(t)})),x.menuContainer.replaceChildren(t,n),document.querySelectorAll(".js-svg-name").forEach((function(e){e.classList.add("link"),e.addEventListener("click",(function(e){return function(e){if(M.backHistory.getLength()){var t=function(e,t,n){var r=document.createElement("div");r.classList.add("js-warning-alert"),r.innerHTML="<p>".concat(e,"</p>");var o=document.createElement("p");o.classList.add("js-warning-alert__yes"),o.innerText="Yes",o.addEventListener("click",t);var i=document.createElement("p");return i.classList.add("js-warning-alert__no"),i.innerText="No",i.addEventListener("click",n),r.append(o,i),r}("Your changes to the current picture will be lost. Load new picture anyway?",(function(){return q(e)}),P);return void x.menuContainer.replaceChildren(t)}q(e)}(e.target.dataset.link)}))})),A()}(C)})),x.savePicBtn.addEventListener("click",(function(e){e.preventDefault(),function(e){var t,n=[];n.push(x.svgimage.contentDocument.querySelector("svg").outerHTML);var r={type:"text/plain"};try{t=new File(n,e,r)}catch(e){t=new Blob(data,r)}var o=URL.createObjectURL(t),i=document.createElement("a");i.href=o,i.download="kolyornytsia.svg",document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)}),0)}("kolyornytsia.svg")})),x.minimizeBtn.addEventListener("click",(function(e){e.target.parentElement.classList.toggle("minimized"),e.target.innerText="<"===e.target.innerText?">":"<"})),x.colorListBtn.addEventListener("click",(function(e){var t=document.createElement("h2");t.classList.add("pallette-menu__header"),t.innerText="Choose color pallette:",x.menuContainer.replaceChildren(t,O.generateListMarkup()),document.querySelectorAll(".js-pallette-name").forEach((function(e){e.classList.add("link"),e.addEventListener("click",(function(e){T(e.target.dataset.palletteName),P()}))})),A()})),x.backdrop.addEventListener("click",P)}();
//# sourceMappingURL=index.ae7f74b6.js.map
